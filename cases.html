<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cases · SynOSX Governance</title>
  <meta name="description" content="SynOSX 判例目录：通过真实制度判例，展示治理系统如何裁决、记录并约束复杂系统行为。" />

  <!-- ✅ System Status Meta (6个) -->
  <meta name="sx-runtime" content="CASES" />
  <meta name="sx-build-date" content="2026-01-13" />
  <meta name="sx-version" content="v1.0.4-Stable" />
  <meta name="sx-commit" content="ba...227" />
  <meta name="sx-policy" content="DAG Constitution" />
  <meta name="sx-statusbar-layout" content="release" />

  <!-- ✅ Shared CSS -->
  <link rel="stylesheet" href="assets/css/sx.core.css" />
  <link rel="stylesheet" href="assets/css/sx.statusbar.css" />
  <link rel="stylesheet" href="assets/css/sx.drawer.css" />

  <!-- ✅ Page CSS (SCOPED: body.sx-cases ...) -->
  <link rel="stylesheet" href="assets/css/pages/cases.page.css" />
</head>

<!-- ✅ 关键：加 sx-cases，否则新版 cases.page.css 全失效 -->
<body class="has-statusbar sx-cases">
  <div class="bg-gradient" aria-hidden="true"></div>

  <!-- ✅ Nav injected by tools/build-includes.mjs (SSOT: registry/site.nav.json) -->
  <!--@include nav-->

  <header class="cases-hero" id="top">
    <div class="container">
      <div class="kicker"><span class="dot"></span> GOVERNANCE CASES</div>
      <h1>可验证的治理判例</h1>
      <p class="subtitle">
        这些不是 Demo，也不是功能展示。<br/>
        每一个 Case，都是在真实制度约束下，展示 <strong>“系统如何裁决、如何阻断、如何被追责”</strong> 的判例。
      </p>
    </div>
  </header>

  <section id="cases" class="cases-section">
    <div class="container">
      <div class="grid cases-grid">

        <!-- ✅ Replay Demo（registry 自动读取） -->
        <div class="card" id="replay-demo-card">
          <span class="badge">REPLAY · DEMO</span>
          <h2>Brand Film · Replay</h2>
          <p>
            本卡片从 <code>registry/replay.registry.json</code> 自动读取品牌回放列表。<br/>
            新增 v3/v4 只需要更新 registry，不需要改本页代码。
          </p>

          <div class="replay-links" id="replay-links">
            <span class="replay-muted">Loading registry…</span>
          </div>

          <a href="replay.html?trace=rc_brand_15s_v1" class="link muted-link">
            进入 Replay Runtime（示例入口） →
          </a>
        </div>

        <div class="card">
          <span class="badge">CASE · VIDEO</span>
          <h2>SynOSX Video</h2>
          <p>
            一个高复杂度 AI 视频系统，<br/>
            在多角色、多资产、多生成步骤下，<br/>
            如何通过制度裁决保持一致性、权限与可回放。
          </p>
          <p>
            重点不在“生成能力”，<br/>
            而在 <strong>场景、角色、行为是否可被制度约束</strong>。
          </p>
          <a href="pages/case-video.html" class="link">阅读判例 →</a>
        </div>

        <div class="card">
          <span class="badge">CASE · VOICE</span>
          <h2>VoiceWall</h2>
          <p>
            在 AI 时代，“表达”本身就是高风险行为。<br/>
            VoiceWall 判例展示了：谁可以发声、以谁的身份、是否可追责。
          </p>
          <p>
            没有身份、没有授权、没有 trace 的发声，一律被制度阻断。
          </p>
          <a href="pages/case-voicewall.html" class="link">阅读判例 →</a>
        </div>

        <div class="card">
          <span class="badge">COMING SOON</span>
          <h2>Export / Invoice Governance</h2>
          <p>
            导出、开票与跨域访问，是企业系统中最常见、也最容易被绕过的高风险行为。
          </p>
          <p>
            该判例将展示制度如何阻断“节前临时绕行”。
          </p>
        </div>

      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      © 2026 SynOSX · Governance Cases ·
      <a class="sb-link" href="index.html">Back to Index</a> ·
      <a class="sb-link" href="manifest.html">Read Manifest</a>
    </div>
  </footer>

  <!-- ✅ Statusbar (统一模板) -->
  <div class="statusbar" role="contentinfo" aria-label="System Status Bar">
    <div class="statusbar-inner">
      <div class="sb-left">
        <span class="sb-pill">
          <span class="sb-key">RUNTIME</span>
          <span class="sb-val" id="sb-runtime">CASES</span>
        </span>
      </div>

      <div class="sb-right">
        <span class="sb-pill" title="POLICY">
          <span class="sb-key">POLICY</span>
          <span class="sb-val" id="sb-policy">DAG Constitution</span>
        </span>
        <span class="sb-pill" title="BUILD">
          <span class="sb-key">BUILD</span>
          <span class="sb-val" id="sb-build">—</span>
        </span>
        <span class="sb-pill" title="VER">
          <span class="sb-key">VER</span>
          <span class="sb-val" id="sb-version">—</span>
        </span>
        <span class="sb-pill sb-copy" title="COMMIT (click to copy)">
          <span class="sb-key">COMMIT</span>
          <span class="sb-val" id="sb-commit">—</span>
        </span>
      </div>
    </div>
  </div>

  <!-- ✅ Shared JS -->
  <script src="assets/js/sx.statusbar.js"></script>
  <script src="assets/js/sx.core.js"></script>
  <script src="assets/js/sx.drawer.js"></script>

  <!-- ✅ Page runtime (kept inline: cases-only registry demo card) -->
  <script>
  (function bootReplayDemoCard(){
    const linksEl = document.getElementById("replay-links");
    if (!linksEl) return;

    // cases.html is at root, so registry path is stable (no "/pages/" base logic needed)
    const registryUrl = "registry/replay.registry.json";
    const replayPage = "replay.html";

    function escapeHtml(s){
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    fetch(registryUrl, { cache: "no-store" })
      .then(r => {
        if (!r.ok) throw new Error("registry fetch failed: " + r.status);
        return r.json();
      })
      .then(reg => {
        const entries = reg && reg.entries ? reg.entries : {};
        const list = Object.values(entries);

        const demos = list
          .filter(e => e && e.intent === "BRAND_FILM_PLAYBACK" && e.actor === "site@sx")
          .sort((a,b) => String(b.recorded_at || "").localeCompare(String(a.recorded_at || "")));

        if (!demos.length){
          linksEl.innerHTML = `<span class="replay-muted">No brand demo entries found in registry.</span>`;
          return;
        }

        linksEl.innerHTML = demos.map(e => {
          const trace = e.trace_id || "";
          const label = (e.notes || trace).trim();
          return `
            <a href="${replayPage}?trace=${encodeURIComponent(trace)}" title="${escapeHtml(trace)}">
              ▶ ${escapeHtml(label)}
            </a>
          `;
        }).join("");
      })
      .catch(err => {
        linksEl.innerHTML = `<span class="replay-muted">Registry load failed. (${escapeHtml(err && err.message ? err.message : err)})</span>`;
      });
  })();
  </script>
</body>
</html>
