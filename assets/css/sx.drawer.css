/* sx.drawer.css — SynOSX Mobile Drawer v11 (Back-to-Basics)
   目标：先保证「电脑 + 安卓 + iOS 都能滚」，不再玩花活。
*/

/* --- 全局变量 --- */
:root{
  --sx-safe-bottom: env(safe-area-inset-bottom, 0px);
  --sx-drawer-bottom-gap: 55px;  /* 离底多少 */
  --sx-drawer-side-gap: 32px;    /* 左右留白 */
  --sx-drawer-max-vh: 0.50;      /* 抽屉最多占 50% 视口高度 */
}

/* --- Shell --- */

.sx-drawer{
  display: none;
}

.sx-drawer.is-open{
  display: block;
}

/* 幕布 */
.sx-drawer-backdrop{
  position: fixed;
  inset: 0;
  z-index: 120;
  background:
    radial-gradient(circle at top, rgba(15, 23, 42, 0.6), rgba(3, 7, 18, 0.96));
  touch-action: none;
}

/* --- Panel：底部卡片（自己滚） --- */

.sx-drawer-panel{
  position: fixed;
  z-index: 130;

  left: var(--sx-drawer-side-gap);
  right: var(--sx-drawer-side-gap);
  bottom: calc(var(--sx-drawer-bottom-gap) + var(--sx-safe-bottom));
  top: auto;

  width: auto;
  max-height: calc(100vh * var(--sx-drawer-max-vh));
  min-height: 260px;

  background: linear-gradient(135deg, rgba(10,14,26,.98), rgba(15,23,42,.98));
  border-radius: 18px;
  border: 1px solid rgba(148,163,184,.55);
  box-shadow: 0 20px 48px rgba(3,7,18,.85);

  color: var(--text);
  display: flex;
  flex-direction: column;
  padding: 10px 12px;

  /* ⭐ 自己就是滚动容器 */
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;

  opacity: 0;
  transform: translateY(100%);
  transition:
    opacity var(--dur) var(--ease),
    transform var(--dur) var(--ease);
}

.sx-drawer.is-open .sx-drawer-panel{
  opacity: 1;
  transform: translateY(0);
}

/* 小屏左右收窄一点 */
@media (max-width: 480px){
  .sx-drawer-panel{
    left: 24px;
    right: 24px;
  }
}

/* --- Top --- */

.sx-drawer-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;

  padding:4px 2px 8px;
  border-bottom:1px solid rgba(31,41,55,.9);
  margin-bottom:6px;
}

.sx-drawer-brand{
  display:flex;
  align-items:center;
  gap:8px;
}

.sx-drawer-brand .logo-icon{
  width:28px;
  height:28px;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  font-size:12px;
  color:#071022;
  background:linear-gradient(135deg,#3b82f6,#6366f1);
}

.sx-drawer-title{
  display:flex;
  flex-direction:column;
  line-height:1.1;
}

.sx-drawer-name{
  font-weight:900;
  color:#e5edff;
  font-size:14px;
}

.sx-drawer-sub{
  font-size:11px;
  font-weight:600;
  color:rgba(148,163,184,.9);
}

.sx-drawer-close{
  border:none;
  background:transparent;
  color:rgba(148,163,184,.9);
  cursor:pointer;
  padding:4px 6px;
  border-radius:999px;
}

.sx-drawer-close:hover{
  background:rgba(37,99,235,.18);
  color:#fff;
}

/* --- Body（现在只是普通包裹，不再滚）--- */

.sx-drawer-body{
  margin-top: 4px;
}

/* --- Nav --- */

.sx-drawer-nav{
  display:flex;
  flex-direction:column;
  gap:2px;
  margin-top:4px;
}

.sx-drawer-nav > a,
.sx-drawer-nav button{
  display:flex;
  align-items:center;
  gap:8px;

  padding:8px 6px;
  border-radius:10px;
  font-size:13px;
  font-weight:750;
  color:#e5edff;

  background:transparent;
  border:none;
  text-align:left;
}

.sx-drawer-nav > a:hover,
.sx-drawer-nav button:hover{
  background:rgba(37,99,235,.18);
}

.sx-usecases-caret{
  margin-left:auto;
  font-size:11px;
  opacity:.8;
  transition:transform var(--dur-fast) var(--ease);
}

[aria-expanded="true"] .sx-usecases-caret{
  transform:rotate(90deg);
}

/* Use Cases panel */

#sx-usecases-panel[hidden]{
  display:none !important;
}

#sx-usecases-panel{
  margin-left:10px;
  padding-left:10px;
  border-left:1px solid rgba(51,65,85,.9);

  display:flex;
  flex-direction:column;
  gap:2px;
}

#sx-usecases-panel a{
  padding:6px 6px;
  border-radius:10px;
  font-size:12px;
  color:rgba(226,232,240,.85);
}

#sx-usecases-panel a:hover{
  background:rgba(37,99,235,.18);
  color:#e5edff;
}

/* Group panels */

.sx-drawer-nav > div[hidden]{
  display:none !important;
}

.sx-drawer-nav > div:not([hidden]){
  margin-left:10px;
  padding-left:10px;
  border-left:1px solid rgba(51,65,85,.9);

  display:flex;
  flex-direction:column;
  gap:2px;
}

.sx-drawer-nav > div:not([hidden]) > a{
  padding:6px 6px;
  border-radius:10px;
  font-size:12px;
  color:rgba(226,232,240,.85);
}

.sx-drawer-nav > div:not([hidden]) > a:hover{
  background:rgba(37,99,235,.18);
  color:#e5edff;
}

/* --- Actions --- */

.sx-drawer-actions{
  margin-top:8px;
  padding-top:8px;
  border-top:1px solid rgba(31,41,55,.9);

  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.sx-drawer-actions .btn-secondary,
.sx-drawer-actions .cta-button{
  flex:1 1 auto;
  justify-content:center;
}
