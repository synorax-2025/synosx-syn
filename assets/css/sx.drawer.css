/* sx.drawer.css — Mobile Drawer Navigation (shared)
   ✅ Mode A: topbar dropdown (under fixed nav)
   ✅ Does NOT cover the nav
   ✅ Blocks background scroll while open
   ✅ Use Cases is the only expandable node
   ✅ Panel aligns strictly with .container (same max + same side padding)
*/

/* -----------------------------
   Config (nav height + container align)
   ----------------------------- */
:root{
  /* nav-content height = 76px (from index.page.css) */
  --sx-nav-h: 76px;

  /* Match sx.core.css */
  --sx-container-max: var(--max); /* 1200px in sx.core.css */
  --sx-container-pad: 24px;       /* desktop container padding */
  --sx-container-pad-sm: 18px;    /* <=980px container padding */

  --sx-drawer-radius: 16px;
}

/* -----------------------------
   Mobile trigger visibility
   ----------------------------- */
.nav-menu-btn{ display: none; }
@media (max-width: 980px){
  .nav-desktop{ display: none; }
  .nav-menu-btn{ display: inline-flex; }
}

/* -----------------------------
   Drawer shell (Mode A)
   - sits UNDER the fixed nav
   - covers the rest of viewport
   ----------------------------- */
.sx-drawer{
  position: fixed;
  left: 0;
  right: 0;
  top: var(--sx-nav-h);
  bottom: 0;

  z-index: 90; /* nav is 100; drawer stays under nav, above page */
  display: none;
}
.sx-drawer.is-open{ display: block; }

/* Backdrop covers page area under nav */
.sx-drawer-backdrop{
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
}

/* -----------------------------
   Panel (dropdown sheet)
   ✅ Strictly aligned to .container:
      width = min(var(--max), 100vw - 2*pad)
      left edge aligns with container left
   ----------------------------- */
.sx-drawer-panel{
  position: relative;

  /* ✅ container alignment */
  width: min(var(--sx-container-max), calc(100vw - (var(--sx-container-pad) * 2)));
  margin: 12px auto 0; /* center by default, but width matches container */
  max-height: calc(100vh - var(--sx-nav-h) - 24px - var(--sx-safe-bottom));
  overflow: auto;

  background: rgba(10,14,26,0.96);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: var(--sx-drawer-radius);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  box-shadow: 0 26px 90px rgba(0,0,0,0.45);

  padding: 14px 14px calc(14px + var(--sx-safe-bottom));
  outline: none;
}

/* ✅ keep exact container padding on <=980px (sx.core.css uses 18px) */
@media (max-width: 980px){
  .sx-drawer-panel{
    width: min(var(--sx-container-max), calc(100vw - (var(--sx-container-pad-sm) * 2)));
  }
}

/* -----------------------------
   Top row (brand + close)
   ----------------------------- */
.sx-drawer-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;

  padding: 6px 4px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
  margin-bottom: 10px;
}

.sx-drawer-brand{
  display:flex;
  align-items:center;
  gap: 12px;
}

.sx-drawer-title{
  display:flex;
  flex-direction:column;
  line-height: 1.1;
}

.sx-drawer-name{
  font-weight: 950;
  letter-spacing: -0.02em;
}

.sx-drawer-sub{
  font-size: 12px;
  color: var(--text-muted);
  font-weight: 800;
  opacity: .9;
}

.sx-drawer-close{
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
  color: rgba(232,236,245,0.90);
  border-radius: 12px;
  padding: 8px 10px;
  cursor: pointer;
}
.sx-drawer-close:hover{
  border-color: rgba(59,130,246,0.35);
  background: rgba(59,130,246,0.10);
}

/* -----------------------------
   Nav list (directory style)
   - NOT card-like rows
   ----------------------------- */
.sx-drawer-nav{
  display:flex;
  flex-direction:column;
  gap: 6px;
  padding: 2px 2px 0;
}

.sx-drawer-nav > a{
  display: inline-flex;            /* ✅ 不要整行“卡片感” */
  align-items: center;
  padding: 10px 6px;
  border-radius: 12px;
  color: var(--text-muted);
  font-size: 14.5px;
  font-weight: 750;
}
.sx-drawer-nav > a:hover{
  background: rgba(255,255,255,0.03);
  color: var(--text);
}

/* -----------------------------
   Use Cases (only expandable node)
   - caret sits next to text (not far right)
   ----------------------------- */
.sx-drawer-usecases{
  width: fit-content;              /* ✅ 文字多长就多长 */
  display: inline-flex;
  align-items: center;
  gap: 8px;                        /* ✅ caret 紧跟文字 */
  padding: 10px 6px;
  border: none;
  background: transparent;
  border-radius: 12px;

  font-size: 14.5px;
  font-weight: 900;
  color: var(--text);

  cursor: pointer;
}

.sx-drawer-usecases:hover{
  background: rgba(255,255,255,0.03);
}

.sx-usecases-caret{
  font-size: 12px;
  opacity: .75;
  transition: transform var(--dur) var(--ease), opacity var(--dur) var(--ease);
}

.sx-drawer-usecases[aria-expanded="true"] .sx-usecases-caret{
  transform: rotate(90deg);
  opacity: .9;
}

/* -----------------------------
   Secondary panel (Use Cases submenu)
   - indented, lighter
   ----------------------------- */
#sx-usecases-panel{
  margin-top: 2px;
  margin-left: 8px;               /* ✅ 二级缩进 */
  padding-left: 10px;
  border-left: 1px solid rgba(255,255,255,0.08);
}

.sx-drawer-group a{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;

  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid transparent;
  background: transparent;

  font-size: 13px;
  font-weight: 650;
  color: rgba(232,236,245,0.90);
}

.sx-drawer-group a:hover{
  background: rgba(255,255,255,0.03);
  border-color: rgba(255,255,255,0.08);
}

.sx-drawer-divider{
  height: 1px;
  margin: 8px 4px;
  background: rgba(255,255,255,0.08);
}

/* Narratives: appendix-style micro highlight */
.sx-drawer-narratives{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:4px;

  padding: 10px 10px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.03);
  border-radius: 14px;
}

.sx-drawer-narratives-title{
  font-weight: 900;
  color: rgba(232,236,245,0.92);
}

.sx-drawer-narratives-sub{
  font-size: 12px;
  font-weight: 800;
  opacity: .72;
  color: rgba(232,236,245,0.86);
}

/* -----------------------------
   Actions (bottom)
   ----------------------------- */
.sx-drawer-actions{
  margin-top: 14px;
  display:flex;
  gap: 10px;
  flex-wrap: wrap;

  padding-top: 12px;
  border-top: 1px solid rgba(255,255,255,0.08);
}

.sx-drawer-actions .btn-secondary,
.sx-drawer-actions .cta-button{
  flex: 1 1 auto;
  justify-content: center;
}

/* -----------------------------
   Reduced motion
   ----------------------------- */
@media (prefers-reduced-motion: reduce){
  .sx-usecases-caret{ transition: none; }
}

/* ==============================
   Drawer scrollbar — SynOSX style
   ============================== */

/* Firefox */
.sx-drawer-panel{
  scrollbar-width: thin;
  scrollbar-color: rgba(59,130,246,0.45) rgba(255,255,255,0.06);
}

/* WebKit (Chrome / Safari / Edge) */
.sx-drawer-panel::-webkit-scrollbar{
  width: 8px;
}

.sx-drawer-panel::-webkit-scrollbar-track{
  background: rgba(255,255,255,0.04);
  border-radius: 999px;
}

.sx-drawer-panel::-webkit-scrollbar-thumb{
  background: linear-gradient(
    180deg,
    rgba(99,102,241,0.65),
    rgba(59,130,246,0.55)
  );
  border-radius: 999px;
  border: 2px solid rgba(10,14,26,0.9); /* 让 thumb 不贴边 */
}

.sx-drawer-panel::-webkit-scrollbar-thumb:hover{
  background: linear-gradient(
    180deg,
    rgba(99,102,241,0.85),
    rgba(59,130,246,0.75)
  );
}
